# Example: one app with dynamic steps and Kubernetes deploy
# Copy or merge into config/apps.yaml and adjust repo/commands to your project.

apps:
  - id: my-go-service
    name: My Go Service
    repo: https://github.com/your-org/my-go-service.git
    branch: main
    deploy_mode: kubectl
    k8s_namespace: apps
    k8s_service_account: noppflow-runner
    k8s_runner_image: ghcr.io/your-org/noppflow-runner:latest
    deploy_manifest_path: k8s/
    steps:
      - name: test
        cmd: go test -v ./...
      - name: build
        cmd: go build -o bin/service ./cmd/server
      - name: deploy
        k8s_deploy: true

# Minimal example (legacy fields still supported):
#
# apps:
#   - id: simple-app
#     name: Simple App
#     repo: https://github.com/org/repo.git
#     branch: main
#     test_cmd: go test ./...
#     build_cmd: go build -o bin/app .
#     deploy_cmd: ""
